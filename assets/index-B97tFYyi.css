:root{--color-primary: #4CAF50;--color-primary-dark: #388E3C;--color-primary-light: #A5D6A7;--color-secondary: #8D6E63;--color-secondary-dark: #5D4037;--color-accent: #FFD54F;--color-accent-dark: #FFC107;--color-success: #4CAF50;--color-warning: #FF9800;--color-error: #F44336;--color-info: #2196F3;--color-bg: #F5F5DC;--color-bg-dark: #E8E8D5;--color-surface: #FFFFFF;--color-text: #2E2E2E;--color-text-light: #666666;--color-text-muted: #999999;--color-qp-excellent: #FFD700;--color-qp-happy: #4CAF50;--color-qp-normal: #FF9800;--color-qp-sad: #F44336;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 16px;--radius-round: 50%;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .1);--shadow-md: 0 4px 6px rgba(0, 0, 0, .1);--shadow-lg: 0 10px 20px rgba(0, 0, 0, .15);--font-family: "Noto Sans JP", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;--font-size-xs: 12px;--font-size-sm: 14px;--font-size-md: 16px;--font-size-lg: 20px;--font-size-xl: 24px;--font-size-2xl: 32px;--transition-fast: .15s ease;--transition-normal: .3s ease;--transition-slow: .5s ease}*{margin:0;padding:0;box-sizing:border-box}html,body{width:100%;height:100%;overflow:hidden}body{font-family:var(--font-family);font-size:var(--font-size-md);color:var(--color-text);background-color:var(--color-bg);line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#root{width:100%;height:100%;display:flex;flex-direction:column}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.flex{display:flex}.flex-col{flex-direction:column}.flex-center{justify-content:center;align-items:center}.flex-between{justify-content:space-between}.flex-wrap{flex-wrap:wrap}.gap-sm{gap:var(--spacing-sm)}.gap-md{gap:var(--spacing-md)}.gap-lg{gap:var(--spacing-lg)}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--color-bg-dark)}::-webkit-scrollbar-thumb{background:var(--color-primary-light);border-radius:var(--radius-sm)}::-webkit-scrollbar-thumb:hover{background:var(--color-primary)}@keyframes pulse{0%,to{opacity:1}50%{opacity:.6}}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes sparkle{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.8}}.animate-pulse{animation:pulse 2s infinite}.animate-bounce{animation:bounce 1s infinite}.animate-fadeIn{animation:fadeIn .3s ease}.animate-slideUp{animation:slideUp .4s ease}.status-bar{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-primary-dark) 100%);color:#fff;box-shadow:var(--shadow-md);min-height:48px}.status-left{display:flex;align-items:center;gap:var(--spacing-xs)}.status-month{font-weight:600;font-size:var(--font-size-sm)}.status-stage{font-size:var(--font-size-xs);opacity:.9}.status-center{position:absolute;left:50%;transform:translate(-50%)}.status-day{font-size:var(--font-size-sm);font-weight:500;background:#fff3;padding:2px 8px;border-radius:var(--radius-sm)}.status-right{display:flex;align-items:center;gap:var(--spacing-sm)}.status-qp{font-weight:600;font-size:var(--font-size-sm);padding:2px 8px;border-radius:var(--radius-sm)}.status-qp.qp-excellent{background:var(--color-qp-excellent);color:var(--color-text)}.status-qp.qp-happy{background:#ffffff4d}.status-qp.qp-normal{background:var(--color-qp-normal);color:var(--color-text)}.status-qp.qp-sad{background:var(--color-qp-sad)}.status-mood{font-size:20px}.stage-progress{padding:var(--spacing-sm) var(--spacing-md);background:var(--color-surface);border-bottom:1px solid var(--color-bg-dark);overflow-x:auto}.stage-progress-track{display:flex;align-items:center;min-width:max-content}.stage-item-wrapper{display:flex;align-items:center}.stage-item{width:36px;height:36px;border-radius:var(--radius-round);display:flex;align-items:center;justify-content:center;transition:all var(--transition-normal);flex-shrink:0}.stage-icon{font-size:18px}.stage-item.stage-completed{background:var(--color-primary);box-shadow:0 2px 8px #4caf504d}.stage-item.stage-current{background:var(--color-accent);box-shadow:0 2px 8px #ffd54f80;animation:pulse 2s infinite}.stage-item.stage-upcoming{background:var(--color-bg-dark);opacity:.6}.stage-connector{width:20px;height:3px;background:var(--color-bg-dark);flex-shrink:0}.stage-connector.completed{background:var(--color-primary)}.stage-labels{display:flex;margin-top:var(--spacing-xs);min-width:max-content}.stage-label{width:56px;font-size:10px;text-align:center;color:var(--color-text-muted);flex-shrink:0}.stage-label-completed{color:var(--color-primary)}.stage-label-current{color:var(--color-accent-dark);font-weight:600}.stage-progress::-webkit-scrollbar{height:0}.igusa-chan-v2{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;animation:gentleSway 3s ease-in-out infinite}.igusa-sparkles-v2{position:absolute;width:100%;height:100%;pointer-events:none}.igusa-sparkles-v2 .sparkle{position:absolute;color:gold;font-size:14px;animation:sparkle 1.5s infinite}.igusa-sparkles-v2 .sparkle:nth-child(1){top:5px;left:10px;animation-delay:0s}.igusa-sparkles-v2 .sparkle:nth-child(2){top:20px;right:5px;animation-delay:.5s}.igusa-sparkles-v2 .sparkle:nth-child(3){bottom:30px;left:50%;animation-delay:1s}@keyframes gentleSway{0%,to{transform:rotate(-1deg)}50%{transform:rotate(1deg)}}@keyframes sparkle{0%,to{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.8)}}.mood-excellent .igusa-face-v2{background:linear-gradient(135deg,#c8e6c9,#a5d6a7)!important}.mood-sad .igusa-face-v2{background:linear-gradient(135deg,#e8f5e9,#c8e6c9)!important;opacity:.85}.btn{display:inline-flex;align-items:center;justify-content:center;gap:var(--spacing-sm);border:none;border-radius:var(--radius-md);font-family:inherit;font-weight:600;cursor:pointer;transition:all var(--transition-fast);text-decoration:none;white-space:nowrap}.btn:active{transform:scale(.98)}.btn-primary{background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-primary-dark) 100%);color:#fff;box-shadow:0 4px 12px #4caf504d}.btn-primary:hover{box-shadow:0 6px 16px #4caf5066}.btn-secondary{background:linear-gradient(135deg,var(--color-secondary) 0%,var(--color-secondary-dark) 100%);color:#fff;box-shadow:0 4px 12px #8d6e634d}.btn-secondary:hover{box-shadow:0 6px 16px #8d6e6366}.btn-success{background:linear-gradient(135deg,#66bb6a,#43a047);color:#fff;box-shadow:0 4px 12px #66bb6a4d}.btn-warning{background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-accent-dark) 100%);color:var(--color-text);box-shadow:0 4px 12px #ffd54f4d}.btn-danger{background:linear-gradient(135deg,#ef5350,#e53935);color:#fff;box-shadow:0 4px 12px #ef53504d}.btn-ghost{background:transparent;color:var(--color-primary);box-shadow:none}.btn-ghost:hover{background:var(--color-primary-light);color:var(--color-primary-dark)}.btn-small{padding:var(--spacing-xs) var(--spacing-sm);font-size:var(--font-size-sm)}.btn-medium{padding:var(--spacing-sm) var(--spacing-md);font-size:var(--font-size-md)}.btn-large{padding:var(--spacing-md) var(--spacing-lg);font-size:var(--font-size-lg)}.btn-full{width:100%}.btn-disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;display:flex;align-items:center;justify-content:center;padding:var(--spacing-md);z-index:1000;animation:fadeIn .2s ease}.modal-content{background:var(--color-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);max-width:400px;width:100%;max-height:80vh;overflow:hidden;display:flex;flex-direction:column}.modal-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md);border-bottom:1px solid var(--color-bg-dark)}.modal-title{font-size:var(--font-size-lg);color:var(--color-text);margin:0}.modal-close{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:var(--radius-round);font-size:var(--font-size-md);color:var(--color-text-muted);cursor:pointer;transition:all var(--transition-fast)}.modal-close:hover{background:var(--color-bg);color:var(--color-text)}.modal-body{padding:var(--spacing-md);overflow-y:auto}.quiz-content{display:flex;flex-direction:column;gap:var(--spacing-md)}.quiz-question{font-size:var(--font-size-lg);color:var(--color-text);line-height:1.5;text-align:center;padding:var(--spacing-sm);background:var(--color-bg);border-radius:var(--radius-md)}.quiz-options{display:flex;flex-direction:column;gap:var(--spacing-sm)}.quiz-option{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--color-surface);border:2px solid var(--color-bg-dark);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast);text-align:left}.quiz-option:hover:not(:disabled){border-color:var(--color-primary);background:var(--color-primary-light)}.quiz-option.selected{border-color:var(--color-primary);background:var(--color-primary-light)}.quiz-option.correct{border-color:var(--color-success);background:#e8f5e9}.quiz-option.incorrect{border-color:var(--color-error);background:#ffebee}.quiz-option:disabled{cursor:default}.option-letter{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:var(--color-bg-dark);border-radius:var(--radius-round);font-weight:600;font-size:var(--font-size-sm);flex-shrink:0}.quiz-option.selected .option-letter{background:var(--color-primary);color:#fff}.quiz-option.correct .option-letter{background:var(--color-success);color:#fff}.quiz-option.incorrect .option-letter{background:var(--color-error);color:#fff}.option-text{flex:1;font-size:var(--font-size-md);color:var(--color-text)}.quiz-result{padding:var(--spacing-md);border-radius:var(--radius-md);text-align:center;animation:slideUp .3s ease}.quiz-result.correct{background:linear-gradient(135deg,#e8f5e9,#c8e6c9)}.quiz-result.incorrect{background:linear-gradient(135deg,#ffebee,#ffcdd2)}.result-label{font-size:var(--font-size-xl);font-weight:600;margin-bottom:var(--spacing-sm)}.result-explanation{font-size:var(--font-size-sm);color:var(--color-text-light);line-height:1.5}.result-bonus{margin-top:var(--spacing-sm);font-size:var(--font-size-md);font-weight:600;color:var(--color-primary-dark)}.quiz-actions{margin-top:var(--spacing-md)}.stage-game{flex:1;display:flex;flex-direction:column;gap:var(--spacing-md);padding:var(--spacing-md)}.game-instruction{text-align:center;padding:var(--spacing-sm);background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-radius:var(--radius-md)}.game-instruction p{margin:0;font-size:var(--font-size-md);color:var(--color-primary-dark)}.game-instruction .hint{font-size:var(--font-size-sm);color:var(--color-text-light);margin-top:var(--spacing-xs)}.character-display{display:flex;justify-content:center;padding:var(--spacing-sm)}.character-display.large{padding:var(--spacing-lg)}.game-progress{text-align:center;font-size:var(--font-size-sm);color:var(--color-text-light);padding:var(--spacing-sm);background:var(--color-bg);border-radius:var(--radius-sm)}.stage-complete{text-align:center;padding:var(--spacing-lg);background:linear-gradient(135deg,#fff8e1,#ffecb3);border-radius:var(--radius-lg);animation:slideUp .5s ease}.complete-message{font-size:var(--font-size-xl);font-weight:700;color:var(--color-primary-dark);margin-bottom:var(--spacing-md)}.badge-earned{font-size:var(--font-size-md);color:var(--color-accent-dark);font-weight:600;margin:var(--spacing-md) 0;animation:sparkle 1s infinite}.text-success{color:var(--color-success)}.text-warning{color:var(--color-warning)}.text-danger{color:var(--color-error)}.kabuwake-field{position:relative;height:200px;background:linear-gradient(to bottom,#8d6e63,#5d4037);border-radius:var(--radius-md);overflow:hidden}.parent-plant{position:relative;width:140%;height:100%}.sprout{position:absolute;bottom:20%;width:3px;background:linear-gradient(to top,#66bb6a,#a5d6a7);transform:translate(-50%);border-radius:50% 50% 0 0;box-shadow:1px 1px 2px #0000001a}.sprout.new-shoot{background:linear-gradient(to top,#dcedc8,#aed581);animation:pulse 1s infinite;z-index:2;box-shadow:0 0 4px #f1f8e9}.cut-line{position:absolute;top:0;bottom:0;width:2px;background:var(--color-error)}.cut-selector{position:relative;width:100%;padding:var(--spacing-md) 0}.cut-slider{width:100%}.cut-preview{position:absolute;top:0;bottom:0;width:2px;background:#0000004d;border-left:2px dashed var(--color-text);z-index:10;pointer-events:none}.cut-selector-container{padding:var(--spacing-sm) var(--spacing-md);background:var(--color-surface);border-radius:var(--radius-sm);box-shadow:var(--shadow-sm);text-align:center}.cut-selector{width:100%;margin-bottom:var(--spacing-xs)}.slider-instruction{font-size:var(--font-size-xs);color:var(--color-text-light);margin:0}.preview-info{text-align:center;padding:var(--spacing-sm);background:var(--color-surface);border-radius:var(--radius-sm)}.planting-grid{display:flex;flex-direction:column;gap:4px;padding:var(--spacing-md);background:#8b5a2b;border-radius:var(--radius-md)}.grid-row{display:flex;gap:4px}.grid-cell{flex:1;aspect-ratio:1;background:sienna;border:2px solid #654321;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;transition:all var(--transition-fast)}.grid-cell.planted{background:#6b8e23;border-color:#556b2f}.grid-cell:hover{transform:scale(1.05)}.plant-count{text-align:center;font-size:var(--font-size-md);color:var(--color-text)}.water-management{display:flex;flex-direction:column;gap:var(--spacing-md)}.day-indicator{text-align:center;font-size:var(--font-size-lg);font-weight:700;color:var(--color-primary-dark)}.field-container{position:relative;height:150px;background:#8b5a2b;border-radius:var(--radius-md);overflow:hidden}.water-surface{position:absolute;bottom:0;left:0;right:0;background:#2196f380;transition:height var(--transition-normal)}.planted-seedlings{position:absolute;bottom:20%;left:0;right:0;display:flex;justify-content:center;gap:8px;flex-wrap:wrap;padding:var(--spacing-sm)}.icon-seedling{width:16px;height:16px;background:#4caf50;border-radius:50% 0 50% 50%;transform:rotate(0);box-shadow:inset -2px -2px #0003}.field-seedling .icon-seedling{width:10px;height:10px}.igusa-bunch{width:100%;height:100%;background:repeating-linear-gradient(90deg,#4CAF50,#4CAF50 4px,#388E3C 4px,#388E3C 5px,transparent 5px,transparent 8px);border-radius:4px 4px 0 0}.scissors-icon{width:24px;height:24px;fill:#e53935;filter:drop-shadow(1px 1px 2px rgba(0,0,0,.3))}.result-overlay{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:100;pointer-events:none;animation:resultPop 1.2s ease-out forwards}.result-text-large{font-size:2.5rem;font-weight:700;text-shadow:2px 2px 0 white,-2px -2px 0 white,2px -2px 0 white,-2px 2px 0 white,0 3px 10px rgba(0,0,0,.3)}@keyframes resultPop{0%{transform:translate(-50%,-50%) scale(.5);opacity:0}15%{transform:translate(-50%,-50%) scale(1.2);opacity:1}30%{transform:translate(-50%,-50%) scale(1);opacity:1}70%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(-50%,-50%) scale(1.1);opacity:0}}.cut-line-indicator{position:absolute;left:0;right:0;text-align:center;font-size:14px;color:var(--color-error);font-weight:700;display:flex;align-items:center;justify-content:center;gap:8px}.cut-line-dashed{flex:1;height:2px;background-image:linear-gradient(to right,#E53935 50%,transparent 50%);background-size:10px 100%}.growth-field{position:relative;height:200px;background:linear-gradient(to bottom,#87ceeb,#87ceeb 60%,#228b22 60%,#006400);border-radius:var(--radius-md);overflow:hidden;display:flex;align-items:flex-end;justify-content:center}.igusa-rows{font-size:24px;letter-spacing:8px;transition:height var(--transition-slow)}.net-overlay{position:absolute;left:0;right:0;height:20px;background:repeating-linear-gradient(45deg,transparent,transparent 8px,rgba(100,80,60,.6) 8px,rgba(100,80,60,.6) 10px),repeating-linear-gradient(-45deg,transparent,transparent 8px,rgba(100,80,60,.6) 8px,rgba(100,80,60,.6) 10px);border-top:2px solid rgba(80,60,40,.8);border-bottom:2px solid rgba(80,60,40,.8)}.event-card{padding:var(--spacing-lg);border-radius:var(--radius-lg);text-align:center;animation:slideUp .3s ease}.event-card h3{font-size:var(--font-size-lg);margin-bottom:var(--spacing-sm)}.event-card p{margin-bottom:var(--spacing-md);color:var(--color-text-light)}.event-net{background:linear-gradient(135deg,#e3f2fd,#bbdefb)}.event-bug{background:linear-gradient(135deg,#ffebee,#ffcdd2)}.event-gas{background:linear-gradient(135deg,#fff3e0,#ffe0b2)}.event-typhoon{background:linear-gradient(135deg,#e8eaf6,#c5cae9)}.net-info{font-weight:700;color:var(--color-primary-dark)}.bug-field{position:relative;height:150px;background:#8b451333;border-radius:var(--radius-md);margin-bottom:var(--spacing-md)}.icon-bug{width:24px;height:10px;background:linear-gradient(to bottom,#fff9c4,#fff59d,#fff176);border-radius:5px;position:relative;box-shadow:0 1px 3px #0000004d}.icon-bug:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:repeating-linear-gradient(90deg,transparent,transparent 4px,rgba(0,0,0,.1) 4px,rgba(0,0,0,.1) 5px);border-radius:5px}.icon-bug:after{content:"";position:absolute;left:-3px;top:1px;width:8px;height:8px;background:radial-gradient(circle at 30% 30%,#8d6e63,#3e2723);border-radius:50%}.bug-target{position:absolute;width:40px;height:40px;background:none;border:none;cursor:pointer;transform:translate(-50%,-50%);transition:transform var(--transition-fast);display:flex;align-items:center;justify-content:center}.bug-target:hover{transform:translate(-50%,-50%) scale(1.2)}.gas-bubbles{display:flex;justify-content:center;gap:var(--spacing-md);margin-bottom:var(--spacing-md)}.gas-bubble{width:20px;height:20px;background:#fff9;border:1px solid rgba(255,255,255,.8);border-radius:50%;animation:floatUp 2s infinite ease-in}.bubble{display:none}.time-selection{text-align:center}.time-selection h3{margin-bottom:var(--spacing-lg)}.time-options{display:flex;gap:var(--spacing-md);justify-content:center}.time-option{display:flex;flex-direction:column;align-items:center;padding:var(--spacing-lg);background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border:2px solid var(--color-primary);border-radius:var(--radius-lg);cursor:pointer;transition:all var(--transition-fast)}.time-option.noon{background:linear-gradient(135deg,#ffebee,#ffcdd2);border-color:var(--color-error)}.time-option:hover{transform:scale(1.05)}.icon-time{width:40px;height:40px;border-radius:50%;margin-bottom:var(--spacing-sm);box-shadow:0 3px 8px #0003;position:relative;overflow:hidden}.icon-time.morning{background:linear-gradient(to bottom,#1a237e,#ff8a65,#ffcc80);border:2px solid #FFCC80}.icon-time.morning:after{content:"";position:absolute;bottom:5px;left:50%;transform:translate(-50%);width:18px;height:9px;background:radial-gradient(ellipse at bottom,#ffe082,#ff9800);border-radius:18px 18px 0 0}.icon-time.noon{background:radial-gradient(circle at 50% 30%,#fff9c4,#2196f3 60%,#1976d2);border:2px solid #FFC107}.icon-time.noon:after{content:"";position:absolute;top:6px;left:50%;transform:translate(-50%);width:16px;height:16px;background:radial-gradient(circle at 30% 30%,#fff,#ffd54f,#ff9800);border-radius:50%;box-shadow:0 0 10px #ffd54f}.icon-time.evening{background:linear-gradient(to bottom,#1a237e,#7b1fa2 30%,#ff5722 70%,#ff8a65);border:2px solid #FF7043}.icon-time.evening:after{content:"";position:absolute;bottom:5px;left:50%;transform:translate(-50%);width:14px;height:7px;background:radial-gradient(ellipse at bottom,#ff8a65,#ff5722);border-radius:14px 14px 0 0}.time-label{font-size:var(--font-size-md);font-weight:700}.time-bonus{font-size:var(--font-size-sm);color:var(--color-success)}.time-penalty{font-size:var(--font-size-sm);color:var(--color-error)}.harvest-header{display:flex;justify-content:space-around;padding:var(--spacing-sm);background:var(--color-bg);border-radius:var(--radius-sm);font-weight:700}.harvest-field{position:relative;height:300px;background:linear-gradient(to bottom,#87ceeb,#87ceeb 70%,#228b22 70%,#006400);border-radius:var(--radius-md);overflow:hidden}.igusa-row-visual{width:100%;height:100%;background:repeating-linear-gradient(90deg,#2E7D32,#2E7D32 2px,transparent 2px,transparent 5px);opacity:.9;position:relative}.igusa-row-visual:after{content:"";position:absolute;top:5px;left:2px;right:0;bottom:0;background:repeating-linear-gradient(90deg,#4CAF50,#4CAF50 1px,transparent 1px,transparent 7px);opacity:.7}.icon-stalk{width:14px;height:70px;background:repeating-linear-gradient(90deg,#4caf50,#4caf50 1px,#388e3c 1px,#388e3c 2px);border-radius:1px 1px 0 0;position:relative;box-shadow:1px 1px 2px #00000026}.icon-stalk.good{background:repeating-linear-gradient(90deg,#66bb6a,#66bb6a 1px,#43a047 1px,#43a047 2px)}.icon-stalk.bad{background:repeating-linear-gradient(90deg,#8d6e63,#8d6e63 1px,#5d4037 1px,#5d4037 2px);transform:rotate(15deg)}.icon-stalk.bad:after{content:"";position:absolute;top:15px;right:-3px;width:4px;height:4px;background:#3e2723;border-radius:50%;box-shadow:0 0 1px #00000080}.flying-igusa{position:absolute;width:30px;height:70px;background:none;border:none;cursor:pointer;transform:translate(-50%);transition:transform var(--transition-fast);display:flex;justify-content:center;align-items:flex-end}.flying-igusa:hover{transform:translate(-50%) scale(1.1)}.flying-igusa.good .icon-stalk{box-shadow:0 0 8px #4caf5099}.water-gauge-area{display:flex;align-items:center;gap:var(--spacing-md)}.dyeing-phase,.drying-phase{display:flex;flex-direction:column;gap:var(--spacing-md)}.mud-container{display:flex;justify-content:center;padding:var(--spacing-lg)}.mud-vessel{position:relative;width:120px;height:180px;background:linear-gradient(135deg,#5d4037,#3e2723);border-radius:0 0 60px 60px;overflow:hidden;border:4px solid #3E2723}.mud-fill{position:absolute;bottom:0;left:0;width:100%;background:linear-gradient(to top,#3e2723,#5d4037 60%,#6d4c41);transition:height .2s;opacity:.95;border-top:none}.mud-fill:after{content:"";position:absolute;top:0;left:0;width:100%;height:5px;background:#ffffff26;animation:mudRipple 2s infinite ease-in-out}@keyframes mudRipple{0%,to{transform:scaleY(1);opacity:.3}50%{transform:scaleY(1.5);opacity:.6}}.target-line{position:absolute;left:0;right:0;height:2px;background:var(--color-success);font-size:10px;color:var(--color-success);padding-left:4px}.dyeing-controls{display:flex;justify-content:center}.temperature-display{display:flex;align-items:center;justify-content:center;gap:var(--spacing-lg);padding:var(--spacing-lg)}.thermometer{width:30px;height:150px;background:#e0e0e0;border-radius:15px;overflow:hidden;position:relative}.temp-fill{position:absolute;bottom:0;left:0;right:0;transition:height var(--transition-fast),background var(--transition-fast)}.temp-value{font-size:var(--font-size-2xl);font-weight:700}.temp-target{text-align:center;font-size:var(--font-size-sm);color:var(--color-text-light)}.drying-controls{display:flex;justify-content:center;gap:var(--spacing-lg)}.selection-phase{display:flex;flex-direction:column;gap:var(--spacing-md)}.igusa-selection{display:flex;gap:var(--spacing-md);justify-content:center}.igusa-item{display:flex;flex-direction:column;align-items:center;padding:var(--spacing-md);background:var(--color-surface);border:2px solid var(--color-bg-dark);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast);min-width:80px}.igusa-item:hover{transform:scale(1.05)}.igusa-item.quality-good:hover{border-color:var(--color-success);background:#e8f5e9}.quality-indicator{width:32px;height:32px;border-radius:4px;display:inline-block;margin-bottom:var(--spacing-xs);box-shadow:1px 1px 2px #0000001a}.quality-indicator.good{background:#4caf50;border:2px solid #2E7D32}.quality-indicator.tip{background:linear-gradient(to top,#4caf50 70%,#8d6e63 70%);border:2px solid #5D4037}.quality-indicator.uneven{background:linear-gradient(90deg,#4caf50,#fdd835,#4caf50);border:2px solid #F9A825}.quality-indicator.damaged{background:#4caf50;position:relative;border:2px solid #D32F2F}.quality-indicator.damaged:after{content:"";position:absolute;width:100%;height:2px;background:#d32f2f;top:50%;left:0;transform:rotate(-45deg)}.igusa-visual{display:none}.igusa-label{font-size:var(--font-size-xs);color:var(--color-text-light)}.selection-hint{text-align:center;font-size:var(--font-size-sm);color:var(--color-text-light);background:var(--color-bg);padding:var(--spacing-sm);border-radius:var(--radius-sm)}.weaving-phase{display:flex;flex-direction:column;gap:var(--spacing-md)}.weaving-display{padding:var(--spacing-lg);background:wheat;border-radius:var(--radius-md)}.loom{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-md)}.warp-threads{font-size:12px;letter-spacing:2px;color:#8b4513}.weave-indicator-icon{width:40px;height:12px;background:#4caf50;border-radius:2px;box-shadow:1px 1px 2px #0003}.weave-indicator{display:flex;align-items:center;gap:8px;font-size:24px;font-weight:700;animation:pulse .5s infinite}.weave-indicator.left{color:var(--color-primary);flex-direction:row}.weave-indicator.right{color:var(--color-secondary);flex-direction:row-reverse}.weave-controls{display:flex;justify-content:center;gap:var(--spacing-lg);margin-top:var(--spacing-md)}.inspection-area{position:relative;height:300px;background:#e0e0e0;margin:var(--spacing-md) 0;border-radius:var(--radius-md);overflow:hidden;cursor:crosshair;box-shadow:inset 0 0 10px #0003}.tatami-surface{width:100%;height:100%;position:relative;background:repeating-linear-gradient(0deg,#c5e1a5,#c5e1a5 2px,#aed581 2px,#aed581 4px)}.defect-spot{position:absolute;width:50px;height:50px;border-radius:50%;background:#f003;border:3px solid rgba(255,0,0,.8);transform:translate(-50%,-50%);cursor:pointer;z-index:10;transition:all .2s;animation:defectPulse 1.5s infinite}@keyframes defectPulse{0%{transform:translate(-50%,-50%) scale(1);opacity:.8}50%{transform:translate(-50%,-50%) scale(1.1);opacity:1;border-color:red}to{transform:translate(-50%,-50%) scale(1);opacity:.8}}.defect-spot.found{background:var(--color-success);color:#fff;font-weight:700;display:flex;align-items:center;justify-content:center}.icon-check{width:12px;height:6px;border-left:2px solid white;border-bottom:2px solid white;transform:rotate(-45deg);margin-top:-2px}.inspection-info{display:flex;justify-content:space-around;padding:var(--spacing-sm);background:var(--color-bg);border-radius:var(--radius-sm)}.final-results{text-align:center;padding:var(--spacing-lg)}.rank-display{font-size:64px;font-weight:700;margin:var(--spacing-lg) 0;text-shadow:2px 2px 4px rgba(0,0,0,.2)}.rank-display.rank-s{color:gold}.rank-display.rank-a{color:#4caf50}.rank-display.rank-b{color:#2196f3}.rank-display.rank-c{color:#ff9800}.rank-display.rank-d{color:#f44336}.rank-message{font-size:var(--font-size-md);color:var(--color-text-light);margin-bottom:var(--spacing-lg)}.final-stats{padding:var(--spacing-md);background:var(--color-bg);border-radius:var(--radius-md);margin-bottom:var(--spacing-lg)}.tatami-preview{margin:var(--spacing-lg) 0}.finished-tatami{padding:var(--spacing-xl);border-radius:var(--radius-md);font-size:var(--font-size-lg);font-weight:700;text-align:center;position:relative;overflow:hidden}.finished-tatami:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.05) 2px,rgba(0,0,0,.05) 4px),repeating-linear-gradient(90deg,transparent,transparent 4px,rgba(255,255,255,.1) 4px,rgba(255,255,255,.1) 6px);pointer-events:none}.finished-tatami.rank-s{background:linear-gradient(135deg,#7cb342,#558b2f,#33691e);color:#fff9c4;box-shadow:0 4px 20px #8bc34a80,inset 0 0 30px #ffffff1a;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.finished-tatami.rank-a{background:linear-gradient(135deg,#8bc34a,#689f38,#558b2f);color:#fff;box-shadow:0 4px 15px #8bc34a66}.finished-tatami.rank-b{background:repeating-linear-gradient(0deg,#9ccc65,#9ccc65 15px,#558b2f 15px,#558b2f 16px,#9ccc65 16px,#9ccc65 30px);color:#fff}.finished-tatami.rank-c{background:repeating-linear-gradient(0deg,#aed581,#aed581 10px,#33691e 10px,#33691e 12px,#aed581 12px,#aed581 20px,#558b2f 20px,#558b2f 22px,#aed581 22px,#aed581 30px);color:var(--color-text)}.finished-tatami.rank-d{background:linear-gradient(0deg,#9e9e9e,#757575 30%,#616161,#8bc34a 70%,#689f38);color:#fff;position:relative}.finished-tatami.rank-d:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(100,100,100,.3) 10px,rgba(100,100,100,.3) 12px);pointer-events:none}.progress-container{display:flex;align-items:center;gap:var(--spacing-sm)}.progress-label{font-size:var(--font-size-sm);color:var(--color-text-light);white-space:nowrap}.progress-track{flex:1;background:var(--color-bg-dark);border-radius:var(--radius-round);overflow:hidden}.progress-fill{height:100%;border-radius:var(--radius-round);transition:width var(--transition-normal)}.progress-value{font-size:var(--font-size-sm);color:var(--color-text-light);white-space:nowrap;min-width:50px;text-align:right}.progress-small .progress-track{height:6px}.progress-medium .progress-track{height:10px}.progress-large .progress-track{height:16px}.progress-primary{background:linear-gradient(90deg,var(--color-primary-light),var(--color-primary))}.progress-success{background:linear-gradient(90deg,#a5d6a7,#4caf50)}.progress-warning{background:linear-gradient(90deg,#ffcc80,#ff9800)}.progress-danger{background:linear-gradient(90deg,#ef9a9a,#f44336)}.app{width:100%;height:100%;max-width:480px;margin:0 auto;display:flex;flex-direction:column;background-color:var(--color-surface);box-shadow:var(--shadow-lg);position:relative;overflow:hidden}.title-screen{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);background:linear-gradient(135deg,#e8f5e9,#c8e6c9,#a5d6a7);text-align:center}.title-screen h1{font-size:var(--font-size-2xl);color:var(--color-primary-dark);margin-bottom:var(--spacing-md);text-shadow:2px 2px 4px rgba(0,0,0,.1)}.title-screen .subtitle{font-size:var(--font-size-md);color:var(--color-text-light);margin-bottom:var(--spacing-xl)}.title-character{font-size:100px;margin-bottom:var(--spacing-lg);animation:bounce 2s infinite}.title-buttons{display:flex;flex-direction:column;gap:var(--spacing-md);width:100%;max-width:280px}.game-layout{flex:1;display:flex;flex-direction:column;overflow:hidden}.game-main{flex:1;overflow-y:auto;padding:var(--spacing-md);display:flex;flex-direction:column}.stage-container{flex:1;display:flex;flex-direction:column;animation:fadeIn .3s ease}.stage-header{text-align:center;margin-bottom:var(--spacing-md)}.stage-header h2{font-size:var(--font-size-xl);color:var(--color-primary-dark);margin-bottom:var(--spacing-xs)}.stage-header .stage-description{font-size:var(--font-size-sm);color:var(--color-text-light)}.stage-content{flex:1;display:flex;flex-direction:column;gap:var(--spacing-md)}.skip-button-area{padding:var(--spacing-md);background-color:var(--color-bg);border-top:1px solid var(--color-bg-dark)}.results-screen{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);background:linear-gradient(135deg,#fff3e0,#ffe0b2,#ffcc80);text-align:center}.results-screen.rank-s{background:linear-gradient(135deg,#fffde7,#fff59d,#ffee58)}.results-screen.rank-d{background:linear-gradient(135deg,#ffebee,#ffcdd2,#ef9a9a)}.results-rank{font-size:80px;font-weight:700;margin-bottom:var(--spacing-md);text-shadow:3px 3px 6px rgba(0,0,0,.2)}.results-rank.rank-s{color:gold}.results-rank.rank-a{color:#4caf50}.results-rank.rank-b{color:#2196f3}.results-rank.rank-c{color:#ff9800}.results-rank.rank-d{color:#f44336}.results-title{font-size:var(--font-size-xl);color:var(--color-text);margin-bottom:var(--spacing-md)}.results-qp{font-size:var(--font-size-lg);color:var(--color-text-light);margin-bottom:var(--spacing-xl)}.results-badges{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);justify-content:center;margin-bottom:var(--spacing-xl)}.badge-item{display:flex;flex-direction:column;align-items:center;padding:var(--spacing-sm);background:var(--color-surface);border-radius:var(--radius-md);box-shadow:var(--shadow-sm)}.badge-item .badge-icon{font-size:32px;margin-bottom:var(--spacing-xs)}.badge-item .badge-name{font-size:var(--font-size-xs);color:var(--color-text-light)}.title-info{margin-top:var(--spacing-xl);display:flex;flex-direction:column;gap:var(--spacing-xs);font-size:var(--font-size-sm);color:var(--color-text-light)}.hint-content{display:flex;flex-direction:column;gap:var(--spacing-md)}.hint-content ul{list-style:none;padding:0}.hint-content li{padding:var(--spacing-sm);background:var(--color-bg);border-radius:var(--radius-sm);margin-bottom:var(--spacing-xs);position:relative;padding-left:var(--spacing-lg)}.hint-content li:before{content:"ðŸ’¡";position:absolute;left:var(--spacing-sm)}.hint-warning{padding:var(--spacing-sm);background:#ffebee;border-radius:var(--radius-sm);color:var(--color-error);font-size:var(--font-size-sm)}.results-stats{padding:var(--spacing-md);background:var(--color-surface);border-radius:var(--radius-md);margin-bottom:var(--spacing-lg)}
